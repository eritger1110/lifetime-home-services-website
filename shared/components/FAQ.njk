{% set faqId = faqId or 'faq' %}
{% set faqClass = faqClass or 'faq' %}

<section class="section faq-section" {% if sectionId %}id="{{ sectionId }}"{% endif %}>
  <div class="container">
    {% if faqTitle or faqDescription %}
    <div class="section-header">
      {% if faqTitle %}
      <h2 class="section-title">{{ faqTitle }}</h2>
      {% endif %}
      
      {% if faqDescription %}
      <p class="section-description">{{ faqDescription }}</p>
      {% endif %}
    </div>
    {% endif %}
    
    <div class="{{ faqClass }}" id="{{ faqId }}">
      {% for faq in faqs %}
      <div class="faq-item" {% if faq.id %}id="{{ faq.id }}"{% endif %}>
        <button 
          class="faq-question" 
          aria-expanded="false" 
          aria-controls="faq-answer-{{ loop.index }}"
          id="faq-question-{{ loop.index }}"
          type="button">
          <span class="question-text">{{ faq.question }}</span>
          <svg class="faq-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path class="icon-horizontal" d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path class="icon-vertical" d="M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        
        <div 
          class="faq-answer" 
          id="faq-answer-{{ loop.index }}"
          aria-labelledby="faq-question-{{ loop.index }}"
          role="region">
          <div class="faq-content">
            {{ faq.answer | safe }}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    
    {% if faqCTA %}
    <div class="section-cta">
      <div class="faq-cta">
        <h3>{{ faqCTA.title or "Still have questions?" }}</h3>
        <p>{{ faqCTA.description or "Our team is here to help. Contact us for personalized assistance." }}</p>
        <a href="{{ faqCTA.url }}" class="btn {{ faqCTA.class or 'btn-primary' }}">
          {% if faqCTA.icon %}
          <svg class="btn-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            {{ faqCTA.icon | safe }}
          </svg>
          {% endif %}
          {{ faqCTA.text }}
        </a>
      </div>
    </div>
    {% endif %}
  </div>
</section>

<!-- FAQ Schema.org JSON-LD -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {% for faq in faqs %}
    {
      "@type": "Question",
      "name": "{{ faq.question | escape }}",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "{{ faq.answer | striptags | escape }}"
      }
    }{% if not loop.last %},{% endif %}
    {% endfor %}
  ]
}
</script>

