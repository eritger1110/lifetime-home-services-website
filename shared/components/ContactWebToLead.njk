{% set formId = formId or 'contact-form' %}
{% set formClass = formClass or 'contact-form' %}
{% set submitText = submitText or 'Send Message' %}

<section class="section contact-section" {% if sectionId %}id="{{ sectionId }}"{% endif %}>
  <div class="container">
    {% if formTitle or formDescription %}
    <div class="section-header">
      {% if formTitle %}
      <h2 class="section-title">{{ formTitle }}</h2>
      {% endif %}
      
      {% if formDescription %}
      <p class="section-description">{{ formDescription }}</p>
      {% endif %}
    </div>
    {% endif %}
    
    <div class="contact-content">
      {% if showContactInfo %}
      <div class="contact-info">
        <h3>Get in Touch</h3>
        
        <div class="contact-methods">
          <div class="contact-method">
            <svg class="contact-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M22 16.92V19.92C22 20.52 21.52 21 20.92 21C9.4 21 0 11.6 0 0.08C0 -0.52 0.48 -1 1.08 -1H4.08C4.68 -1 5.16 -0.52 5.16 0.08C5.16 2.08 5.56 4 6.28 5.76C6.44 6.12 6.32 6.56 6 6.84L4.84 8C6.84 11.88 10.12 15.16 14 17.16L15.16 16C15.44 15.68 15.88 15.56 16.24 15.72C18 16.44 19.92 16.84 21.92 16.84C22.52 16.84 23 17.32 23 17.92V20.92Z" fill="currentColor"/>
            </svg>
            <div>
              <h4>Phone</h4>
              <a href="tel:{{ site.phone }}">{{ site.phone }}</a>
            </div>
          </div>
          
          <div class="contact-method">
            <svg class="contact-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="L22 6L12 13L2 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <div>
              <h4>Email</h4>
              <a href="mailto:{{ site.email }}">{{ site.email }}</a>
            </div>
          </div>
          
          <div class="contact-method">
            <svg class="contact-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M21 10C21 17 12 23 12 23S3 17 3 10C3 5.02944 7.02944 1 12 1C16.9706 1 21 5.02944 21 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="2"/>
            </svg>
            <div>
              <h4>Service Areas</h4>
              <p>Wisconsin, Illinois, Minnesota, Colorado</p>
            </div>
          </div>
        </div>
      </div>
      {% endif %}
      
      <div class="contact-form-wrapper">
        <form 
          id="{{ formId }}" 
          class="{{ formClass }}" 
          action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" 
          method="POST"
          novalidate>
          
          <!-- Salesforce Organization ID -->
          <input type="hidden" name="oid" value="00D5f000005JQXK">
          
          <!-- Return URL after form submission -->
          <input type="hidden" name="retURL" value="{{ site.url }}/thank-you/">
          
          <!-- UTM Tracking Fields (populated by JavaScript) -->
          <input type="hidden" id="utm_source" name="utm_source" value="">
          <input type="hidden" id="utm_medium" name="utm_medium" value="">
          <input type="hidden" id="utm_campaign" name="utm_campaign" value="">
          <input type="hidden" id="utm_content" name="utm_content" value="">
          <input type="hidden" id="utm_term" name="utm_term" value="">
          
          <!-- Lead Source -->
          <input type="hidden" name="lead_source" value="Website - {{ brand | upper }}">
          
          <!-- Honeypot for spam protection -->
          <div class="honeypot" aria-hidden="true">
            <label for="website">Website (leave blank):</label>
            <input type="text" id="website" name="website" tabindex="-1" autocomplete="off">
          </div>
          
          <div class="form-grid">
            <div class="form-group">
              <label for="first_name" class="form-label">
                First Name <span class="required" aria-label="required">*</span>
              </label>
              <input 
                type="text" 
                id="first_name" 
                name="first_name" 
                class="form-input" 
                required 
                aria-describedby="first_name_error"
                autocomplete="given-name">
              <div id="first_name_error" class="form-error" role="alert" aria-live="polite"></div>
            </div>
            
            <div class="form-group">
              <label for="last_name" class="form-label">
                Last Name <span class="required" aria-label="required">*</span>
              </label>
              <input 
                type="text" 
                id="last_name" 
                name="last_name" 
                class="form-input" 
                required 
                aria-describedby="last_name_error"
                autocomplete="family-name">
              <div id="last_name_error" class="form-error" role="alert" aria-live="polite"></div>
            </div>
          </div>
          
          <div class="form-grid">
            <div class="form-group">
              <label for="email" class="form-label">
                Email <span class="required" aria-label="required">*</span>
              </label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                class="form-input" 
                required 
                aria-describedby="email_error"
                autocomplete="email">
              <div id="email_error" class="form-error" role="alert" aria-live="polite"></div>
            </div>
            
            <div class="form-group">
              <label for="phone" class="form-label">
                Phone <span class="required" aria-label="required">*</span>
              </label>
              <input 
                type="tel" 
                id="phone" 
                name="phone" 
                class="form-input phone-mask" 
                required 
                aria-describedby="phone_error"
                autocomplete="tel"
                placeholder="(555) 123-4567">
              <div id="phone_error" class="form-error" role="alert" aria-live="polite"></div>
            </div>
          </div>
          
          {% if showServiceField %}
          <div class="form-group">
            <label for="service" class="form-label">Service Interested In</label>
            <select id="service" name="service" class="form-select" aria-describedby="service_error">
              <option value="">Select a service...</option>
              {% if brand == 'lifetime' %}
                <option value="Radon Testing">Radon Testing</option>
                <option value="Radon Mitigation">Radon Mitigation</option>
                <option value="Duct Cleaning">Duct Cleaning</option>
                <option value="Duct Sealing (Aeroseal)">Duct Sealing (Aeroseal)</option>
                <option value="Floor Coatings">Floor Coatings</option>
              {% elif brand == 'cc' %}
                <option value="Reach-In Closets">Reach-In Closets</option>
                <option value="Walk-In Closets">Walk-In Closets</option>
                <option value="Garage Storage">Garage Storage</option>
                <option value="Hobby Room">Hobby Room</option>
                <option value="Home Office">Home Office</option>
                <option value="Laundry Room">Laundry Room</option>
                <option value="Mudroom">Mudroom</option>
                <option value="Walk-In Pantry">Walk-In Pantry</option>
              {% elif brand == 'aih' %}
                <option value="Control4 Systems">Control4 Systems</option>
                <option value="Home Theater">Home Theater</option>
                <option value="Whole Home Wi-Fi">Whole Home Wi-Fi</option>
                <option value="Smart Home">Smart Home</option>
              {% endif %}
              <option value="Other">Other</option>
            </select>
            <div id="service_error" class="form-error" role="alert" aria-live="polite"></div>
          </div>
          {% endif %}
          
          <div class="form-group">
            <label for="description" class="form-label">
              Message <span class="required" aria-label="required">*</span>
            </label>
            <textarea 
              id="description" 
              name="description" 
              class="form-textarea" 
              rows="4" 
              required 
              aria-describedby="description_error"
              placeholder="Tell us about your project or questions..."></textarea>
            <div id="description_error" class="form-error" role="alert" aria-live="polite"></div>
          </div>
          
          <div class="form-group form-consent">
            <label class="checkbox-label">
              <input 
                type="checkbox" 
                id="consent" 
                name="consent" 
                class="form-checkbox" 
                required 
                aria-describedby="consent_error">
              <span class="checkbox-custom" aria-hidden="true"></span>
              <span class="checkbox-text">
                I agree to receive communications from {{ site.title }} and understand that I can unsubscribe at any time. 
                <span class="required" aria-label="required">*</span>
              </span>
            </label>
            <div id="consent_error" class="form-error" role="alert" aria-live="polite"></div>
          </div>
          
          <div class="form-actions">
            <button type="submit" class="btn btn-primary btn-lg form-submit" aria-describedby="form_status">
              <svg class="btn-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M22 2L11 13L4 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span class="btn-text">{{ submitText }}</span>
              <span class="btn-loading" aria-hidden="true">Sending...</span>
            </button>
          </div>
          
          <div id="form_status" class="form-status" role="status" aria-live="polite"></div>
        </form>
      </div>
    </div>
  </div>
</section>

